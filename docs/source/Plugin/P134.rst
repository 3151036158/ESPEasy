.. include:: ../Plugin/_plugin_substitutions_p13x.repl
.. _P134_page:

|P134_typename|
==================================================

|P134_shortinfo|

Plugin details
--------------

Type: |P134_type|

Name: |P134_name|

Status: |P134_status|

GitHub: |P134_github|_

Maintainer: |P134_maintainer|

Used libraries: |P134_usedlibraries|

Description
-----------

Ultrasonic distance sensor, with an effective range of 30 to 4500 mm.

Configuration
--------------

.. image:: P134_DeviceConfiguration.png
  :alt: Device configuration

* **Name** A unique name should be entered here.

* **Enabled** The device can be disabled or enabled. When not enabled the device should not use any resources.

Sensor
^^^^^^

There are different options available, based on the unit model, ESP8266 or ESP32, and the build type. Some ESP8266 builds don't have the I2C Serial options included, to limit the build-size.

Using ESP8266
~~~~~~~~~~~~~

.. image:: P134_SerialPortOptions_ESP8266.png
  :alt: Serial port options, specific to ESP8266

* **I2C Serial**: SC16IS752 based I2C Serial boards are supported (see above), select the I2C Address and Channel below.
* **HW Serial0: GPIO-3 (D9) <- TX / GPIO-1 (D10) -> RX**: The regular serial port of the ESP, Enable Serial port has to be disabled (unchecked) in Tools/Advanced settings for the plugin to be able to use this port.
* **HW Serial0 swap: GPIO-13 (D7) <- TX / GPIO-15 (D8) -> RX**: Alternative hardware serial port, using different pins.
* **HW Serial1: - <- TX / GPIO-2 (D4) -> RX**: The secondary serial port. Not usable for this sensor.
* **SoftwareSerial**: Uses a software serial receiver, not useable for high data speeds or devices that send high data volumes, as that will overload the ESP. Can be used for this sensor.

**I2C Serial**

**I2C Address**: A list of supported I2C addresses for the serial adapter:

.. image:: P134_SerialI2CAddressOptions.png
  :alt: I2C Addresses for I2C Serial adapter.

**Channel**: Select the channel the sensor is connected to:

.. image:: P134_SerialI2CChannelOptions.png
  :alt: Available I2C Serial Channel options

**SoftwareSerial**

.. image:: P134_SerialSoftwareSerialPins_ESP8266.png
  :alt: Configure pins for Software Serial

* **GPIO <- TX**: Select the GPIO pin that the sensor TX signal is connected to.
* **GPIO -> RX(optional)**: Optional. Select the GPIO pin that the sensor RX signal is connected to. This plugin does not use this pin, so this can be set to None.

Using ESP32
~~~~~~~~~~~

.. image:: P134_SerialPortOptions_ESP32.png
  :alt: Serial port options, specific to ESP32

* **I2C Serial**: The SC16IS752 based I2C Serial boards are supported (see above), select the I2C Address and Channel below.
* **HW Serial0**: ESP32 supports up to 3 serial ports, with freely configurable GPIO pins. When Enable Serial port is enabled in Tools/Advanced, the HW Serial0 port is reserved for system use, and can not be used for devices.
* **HW Serial1**: ESP32 supports up to 3 serial ports, with freely configurable GPIO pins.
* **HW Serial2**: ESP32 supports up to 3 serial ports, with freely configurable GPIO pins.

**I2C Serial**

See **I2C Serial** above in the *Using ESP8266* section.

**HW SerialN**

* **GPIO <- TX**: Select the GPIO pin that the sensor TX signal is connected to.
* **GPIO -> RX(optional)**: Optional. Select the GPIO pin that the sensor RX signal is connected to. This sensor does not use this pin, so this can be set to None.


Data Acquisition
^^^^^^^^^^^^^^^^

This group of settings, **Single event with all values**, **Send to Controller** and **Interval** settings are standard available configuration items. Send to Controller is only visible when one or more Controllers are configured.

**Interval** By default, Interval will be set to 60 sec. It is the frequency used to read sensor values and send these to any Controllers configured for this device.

Values
^^^^^^

The measured value is available in ``Distance``. A formula can be set to recalculate. The number of decimals is by default set to 2.



Change log
----------

.. versionchanged:: 2.0

  |added| 2022-08-01 Initially added.
